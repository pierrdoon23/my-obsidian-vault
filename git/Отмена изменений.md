
### **1. Отмена изменений в рабочей директории (еще не добавлены в индекс)**
Если вы изменили файлы, но **не добавили** их в индекс (`git add`), чтобы вернуть их к состоянию последнего коммита:
```bash
git restore file.txt          # Отмена изменений в конкретном файле
git restore .                # Отмена всех изменений в рабочей директории
```
**Старая команда (работает, но устарела):**
```bash
git checkout -- file.txt
```

---

### **2. Отмена добавления файлов в индекс (staging area)**
Если вы добавили файлы в индекс (`git add`), но передумали их коммитить:
```bash
git restore --staged file.txt  # Убрать файл из индекса (изменения останутся в рабочей директории)
git restore --staged .         # Убрать все файлы из индекса
```
**Альтернатива:**
```bash
git reset file.txt            # То же самое, что и restore --staged
```

---

### **3. Отмена последнего коммита (если он еще не отправлен на сервер)**
Если вы сделали коммит, но хотите его **полностью удалить** (с потерей изменений):
```bash
git reset --hard HEAD~1      # Удалить последний коммит и все изменения в рабочей директории
```
Если вы хотите **сохранить изменения в рабочей директории**, но отменить коммит:
```bash
git reset --soft HEAD~1      # Отменить коммит, но оставить изменения в индексе
git reset --mixed HEAD~1     # Отменить коммит и убрать изменения из индекса (по умолчанию)
```

---

### **4. Отмена коммита, который уже отправлен на сервер**
Если коммит уже был отправлен в удаленный репозиторий, используйте `git revert`, чтобы создать **новый коммит**, отменяющий изменения:
```bash
git revert HEAD             # Отменить последний коммит
git revert a1b2c3d          # Отменить коммит с хешем a1b2c3d
```
Это безопасный способ, так как история не переписывается.

---

### **5. Восстановление удаленных файлов**
Если вы удалили файл и закоммитили это, восстановите его из истории:
```bash
git checkout HEAD^ -- file.txt  # Взять версию файла из предыдущего коммита
```

---

### **6. Отмена слияния (merge)**
Если слияние прошло с ошибками:
```bash
git merge --abort          # Прервать слияние и вернуться к состоянию до merge
```

---

### **Важно!**
- **`git reset --hard`** удаляет изменения безвозвратно. Убедитесь, что они не нужны!
- Если коммиты были отправлены на сервер (**push**), избегайте `git reset`, чтобы не сломать историю у других разработчиков. Используйте `git revert`.
- Всегда проверяйте историю коммитов (`git log`) перед отменой.

---

### Примеры ситуаций:
1. **«Я случайно удалил важный файл»**:
   ```bash
   git restore file.txt
   ```

2. **«Добавил в индекс лишние файлы»**:
   ```bash
   git restore --staged trashfile.txt
   ```

3. **«Забыл добавить файл в последний коммит»**:
   ```bash
   git add missed-file.txt
   git commit --amend        # Добавить файл к предыдущему коммиту
   ```

Если что-то пошло не так, Git хранит историю 30 дней (по умолчанию). Используйте `git reflog`, чтобы найти потерянные коммиты.